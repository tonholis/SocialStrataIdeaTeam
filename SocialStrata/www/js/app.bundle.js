!function(){"use strict";angular.module("app.auth",[])}(),function(){"use strict";angular.module("app.buildings",[])}(),function(){"use strict";angular.module("app.profiles",[])}(),function(){"use strict";angular.module("app.sidemenu",[])}(),function(){"use strict";function e(e,n,i,t){e.data={},e.login=function(){n.login(e.data.username,e.data.password).success(function(e){t.go("app.buildings")}).error(function(e){i.alert({title:"Login failed!",template:"Please check your credentials!"})})}}e.$inject=["$scope","authService","$ionicPopup","$state"],angular.module("app.auth").controller("authController",e)}(),function(){"use strict";function e(e){return{login:function(n,i){var t=e.defer(),a=t.promise;return"user"==n&&"password"==i?t.resolve("Welcome "+n+"!"):t.reject("Wrong credentials!"),a.success=function(e){return a.then(e),a},a.error=function(e){return a.then(null,e),a},a},user:function(){return{username:"user",password:"password",type:Math.floor(2*Math.random())+1}}}}e.$inject=["$q"],angular.module("app.auth").service("authService",e)}(),function(){"use strict";function e(e,n){e.channels=[{name:"Channel 1",id:1},{name:"Channel 2",id:2},{name:"Channel 3",id:3},{name:"Channel 4",id:4},{name:"Channel 5",id:5},{name:"Channel 6",id:6}]}e.$inject=["$scope","$stateParams"],angular.module("app.buildings").controller("buildingController",e)}(),function(){"use strict";function e(e){e.buildings=[{name:"Building 1",id:1},{name:"Building 2",id:2},{name:"Building 3",id:3},{name:"Building 4",id:4},{name:"Building 5",id:5},{name:"Building 6",id:6}]}e.$inject=["$scope"],angular.module("app.buildings").controller("buildingsController",e)}(),function(){"use strict";function e(e){}e.$inject=["$scope"],angular.module("app.profiles").controller("landlordProfileController",e)}(),function(){"use strict";function e(e){}e.$inject=["$scope"],angular.module("app.profiles").controller("tenantProfileController",e)}(),function(){"use strict";function e(e){}e.$inject=["$scope"],angular.module("app.sidemenu").controller("sidemenuController",e)}(),function(){"use strict";angular.module("app",["ionic","app.auth","app.sidemenu","app.buildings","app.profiles"]).run(["$ionicPlatform",function(e){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}])}(),function(){"use strict";angular.module("app").config(["$stateProvider","$urlRouterProvider",function(e,n){e.state("app",{url:"/app","abstract":!0,templateUrl:"views/sidemenu.html"}).state("app.buildings",{url:"/buildings",views:{menuContent:{templateUrl:"views/buildings.html"}}}).state("app.building",{url:"/buildings/:buildingId",views:{menuContent:{templateUrl:"views/building.html"}}}).state("app.profile",{url:"/profile",resolve:{user:["authService",function(e){return e.user()}]},views:{menuContent:{templateProvider:["$timeout","$stateParams","user",function(e,n,i){console.log(i);var t=null;return t=1==i.type?"views/profile/landlord.html":"views/profile/tenant.html",console.log(t),t}]}}}).state("login",{url:"/login",templateUrl:"views/auth/login.html"}),n.otherwise("/login")}])}(),function(){"use strict";angular.module("app").factory("FirebaseService",function(){var e={apiKey:"AIzaSyB5q81AGGox4i8-QL2KOtnDDfi05irgcHE",authDomain:"socialstrataideateam.firebaseapp.com",databaseURL:"https://socialstrataideateam.firebaseio.com",storageBucket:""};return firebase.initializeApp(e)})}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGgvYXV0aC5tb2R1bGUuanMiLCJidWlsZGluZ3MvYnVpbGRpbmdzLm1vZHVsZS5qcyIsInByb2ZpbGUvcHJvZmlsZXMubW9kdWxlLmpzIiwic2lkZW1lbnUvc2lkZW1lbnUubW9kdWxlLmpzIiwiYXV0aC9hdXRoQ29udHJvbGxlci5qcyIsImFwcC5idW5kbGUuanMiLCJhdXRoL2F1dGhTZXJ2aWNlLmpzIiwiYnVpbGRpbmdzL2J1aWxkaW5nQ29udHJvbGxlci5qcyIsImJ1aWxkaW5ncy9idWlsZGluZ3NDb250cm9sbGVyLmpzIiwicHJvZmlsZS9sYW5kbG9yZFByb2ZpbGVDb250cm9sbGVyLmpzIiwicHJvZmlsZS90ZW5hbnRQcm9maWxlQ29udHJvbGxlci5qcyIsInNpZGVtZW51L3NpZGVtZW51Q29udHJvbGxlci5qcyIsImFwcC5tb2R1bGUuanMiLCJhcHAucm91dGVyLmpzIiwiYXBwLnNlcnZpY2VzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJhdXRoQ29udHJvbGxlciIsIiRzY29wZSIsImF1dGhTZXJ2aWNlIiwiJGlvbmljUG9wdXAiLCIkc3RhdGUiLCJkYXRhIiwibG9naW4iLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwic3VjY2VzcyIsImdvIiwiZXJyb3IiLCJhbGVydCIsInRpdGxlIiwidGVtcGxhdGUiLCIkaW5qZWN0IiwiY29udHJvbGxlciIsIiRxIiwiZGVmZXJyZWQiLCJkZWZlciIsInByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZm4iLCJ0aGVuIiwidXNlciIsInR5cGUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzZXJ2aWNlIiwiYnVpbGRpbmdDb250cm9sbGVyIiwiJHN0YXRlUGFyYW1zIiwiY2hhbm5lbHMiLCJuYW1lIiwiaWQiLCJidWlsZGluZ3NDb250cm9sbGVyIiwiYnVpbGRpbmdzIiwibGFuZGxvcmRQcm9maWxlQ29udHJvbGxlciIsInRlbmFudFByb2ZpbGVDb250cm9sbGVyIiwic2lkZW1lbnVDb250cm9sbGVyIiwicnVuIiwiJGlvbmljUGxhdGZvcm0iLCJyZWFkeSIsIndpbmRvdyIsImNvcmRvdmEiLCJwbHVnaW5zIiwiS2V5Ym9hcmQiLCJoaWRlS2V5Ym9hcmRBY2Nlc3NvcnlCYXIiLCJkaXNhYmxlU2Nyb2xsIiwiU3RhdHVzQmFyIiwic3R5bGVEZWZhdWx0IiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsImFic3RyYWN0IiwidGVtcGxhdGVVcmwiLCJ2aWV3cyIsIm1lbnVDb250ZW50IiwidGVtcGxhdGVQcm92aWRlciIsIiR0aW1lb3V0IiwiY29uc29sZSIsImxvZyIsInZpZXciLCJvdGhlcndpc2UiLCJmYWN0b3J5IiwiYXBpS2V5IiwiYXV0aERvbWFpbiIsImRhdGFiYXNlVVJMIiwic3RvcmFnZUJ1Y2tldCIsImZpcmViYXNlIiwiaW5pdGlhbGl6ZUFwcCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUVBQSxTQUFBQyxPQUFBLGtCQ0hBLFdBQ0EsWUFFQUQsU0FBQUMsT0FBQSx1QkNIQSxXQUNBLFlBRUFELFNBQUFDLE9BQUEsc0JDSEEsV0FDQSxZQUVBRCxTQUFBQyxPQUFBLHNCQ0hBLFdBQ0EsWUFPQSxTQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUVBSCxFQUFBSSxRQUVBSixFQUFBSyxNQUFBLFdBQ0FKLEVBQUFJLE1BQUFMLEVBQUFJLEtBQUFFLFNBQUFOLEVBQUFJLEtBQUFHLFVBQUFDLFFBQUEsU0FBQUosR0FDQUQsRUFBQU0sR0FBQSxtQkFDQUMsTUFBQSxTQUFBTixHQUNBRixFQUFBUyxPQUNBQyxNQUFBLGdCQUNBQyxTQUFBLHNDQ0tJZCxFQUFlZSxTQUFXLFNBQVUsY0FBZSxjQUFlLFVEcEJ0RWpCLFFBQUFDLE9BQUEsWUFFQWlCLFdBQUEsaUJBQUFoQixNRUxBLFdBQ0EsWUFPQSxTQUFBRSxHQUFBZSxHQUVBLE9BQ0FYLE1BQUEsU0FBQUMsRUFBQUMsR0FDQSxHQUFBVSxHQUFBRCxFQUFBRSxR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QUFBLGdCQ3BFQSxXQUNBLFlBRUFwRSxTQUNBQyxPQUFBLE9BQ0FvRSxRQUFBLGtCQUFBLFdBQ0EsR0FBQWYsSUFDQWdCLE9BQUEsMENBQ0FDLFdBQUEsdUNBQ0FDLFlBQUEsOENBQ0FDLGNBQUEsR0FFQSxPQUFBQyxVQUFBQyxjQUFBckIiLCJmaWxlIjoiYXBwLmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAuYXV0aFwiLCBbXSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAuYnVpbGRpbmdzXCIsIFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcC5wcm9maWxlc1wiLCBbXSk7XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAuc2lkZW1lbnVcIiwgW10pO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwLmF1dGhcIilcblxuICAgICAgICAuY29udHJvbGxlcihcImF1dGhDb250cm9sbGVyXCIsIGF1dGhDb250cm9sbGVyKTtcblxuXG4gICAgZnVuY3Rpb24gYXV0aENvbnRyb2xsZXIoJHNjb3BlLCBhdXRoU2VydmljZSwgJGlvbmljUG9wdXAsICRzdGF0ZSkge1xuXG4gICAgICAgICRzY29wZS5kYXRhID0ge307XG5cbiAgICAgICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYXV0aFNlcnZpY2UubG9naW4oJHNjb3BlLmRhdGEudXNlcm5hbWUsICRzY29wZS5kYXRhLnBhc3N3b3JkKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ2FwcC5idWlsZGluZ3MnKTtcbiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxlcnRQb3B1cCA9ICRpb25pY1BvcHVwLmFsZXJ0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdMb2dpbiBmYWlsZWQhJyxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICdQbGVhc2UgY2hlY2sgeW91ciBjcmVkZW50aWFscyEnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcC5hdXRoXCIsIFtdKTtcbn0pKCk7XG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwLmJ1aWxkaW5nc1wiLCBbXSk7XG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcC5wcm9maWxlc1wiLCBbXSk7XG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcC5zaWRlbWVudVwiLCBbXSk7XG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhdXRoQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiYXV0aFNlcnZpY2VcIiwgXCIkaW9uaWNQb3B1cFwiLCBcIiRzdGF0ZVwiXTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcC5hdXRoXCIpXG5cbiAgICAgICAgLmNvbnRyb2xsZXIoXCJhdXRoQ29udHJvbGxlclwiLCBhdXRoQ29udHJvbGxlcik7XG5cblxuICAgIGZ1bmN0aW9uIGF1dGhDb250cm9sbGVyKCRzY29wZSwgYXV0aFNlcnZpY2UsICRpb25pY1BvcHVwLCAkc3RhdGUpIHtcblxuICAgICAgICAkc2NvcGUuZGF0YSA9IHt9O1xuXG4gICAgICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGF1dGhTZXJ2aWNlLmxvZ2luKCRzY29wZS5kYXRhLnVzZXJuYW1lLCAkc2NvcGUuZGF0YS5wYXNzd29yZCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdhcHAuYnVpbGRpbmdzJyk7XG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsZXJ0UG9wdXAgPSAkaW9uaWNQb3B1cC5hbGVydCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnTG9naW4gZmFpbGVkIScsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnUGxlYXNlIGNoZWNrIHlvdXIgY3JlZGVudGlhbHMhJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhdXRoU2VydmljZS4kaW5qZWN0ID0gW1wiJHFcIl07XG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAuYXV0aFwiKVxuXG4gICAgICAgIC5zZXJ2aWNlKFwiYXV0aFNlcnZpY2VcIiwgYXV0aFNlcnZpY2UpXG5cblxuICAgIGZ1bmN0aW9uIGF1dGhTZXJ2aWNlKCRxKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxvZ2luOiBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICB2YXIgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XG5cbiAgICAgICAgICAgICAgICBpZiAodXNlcm5hbWUgPT0gJ3VzZXInICYmIHBhc3N3b3JkID09ICdwYXNzd29yZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgnV2VsY29tZSAnICsgdXNlcm5hbWUgKyAnIScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgnV3JvbmcgY3JlZGVudGlhbHMhJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb21pc2Uuc3VjY2VzcyA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZm4pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvbWlzZS5lcnJvciA9IGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4obnVsbCwgZm4pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB1c2VyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IFwidXNlclwiLFxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogXCJwYXNzd29yZFwiLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSArIDFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGJ1aWxkaW5nQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJHN0YXRlUGFyYW1zXCJdO1xuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwLmJ1aWxkaW5nc1wiKVxuXG4gICAgICAgIC5jb250cm9sbGVyKFwiYnVpbGRpbmdDb250cm9sbGVyXCIsIGJ1aWxkaW5nQ29udHJvbGxlcik7XG5cblxuICAgIGZ1bmN0aW9uIGJ1aWxkaW5nQ29udHJvbGxlcigkc2NvcGUsICRzdGF0ZVBhcmFtcykge1xuICAgICAgICAkc2NvcGUuY2hhbm5lbHMgPSBbXG4gICAgICAgICAgICB7IG5hbWU6ICdDaGFubmVsIDEnLCBpZDogMSB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnQ2hhbm5lbCAyJywgaWQ6IDIgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ0NoYW5uZWwgMycsIGlkOiAzIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdDaGFubmVsIDQnLCBpZDogNCB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnQ2hhbm5lbCA1JywgaWQ6IDUgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ0NoYW5uZWwgNicsIGlkOiA2IH1cbiAgICAgICAgXTtcbiAgICB9XG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBidWlsZGluZ3NDb250cm9sbGVyLiRpbmplY3QgPSBbXCIkc2NvcGVcIl07XG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAuYnVpbGRpbmdzXCIpXG5cbiAgICAgICAgLmNvbnRyb2xsZXIoXCJidWlsZGluZ3NDb250cm9sbGVyXCIsIGJ1aWxkaW5nc0NvbnRyb2xsZXIpO1xuXG5cbiAgICBmdW5jdGlvbiBidWlsZGluZ3NDb250cm9sbGVyKCRzY29wZSkge1xuICAgICAgICAkc2NvcGUuYnVpbGRpbmdzID0gW1xuICAgICAgICAgICAgeyBuYW1lOiAnQnVpbGRpbmcgMScsIGlkOiAxIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdCdWlsZGluZyAyJywgaWQ6IDIgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ0J1aWxkaW5nIDMnLCBpZDogMyB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnQnVpbGRpbmcgNCcsIGlkOiA0IH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdCdWlsZGluZyA1JywgaWQ6IDUgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ0J1aWxkaW5nIDYnLCBpZDogNiB9XG4gICAgICAgIF07XG4gICAgfVxufSkoKTtcbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgbGFuZGxvcmRQcm9maWxlQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCJdO1xuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwLnByb2ZpbGVzXCIpXG5cbiAgICAgICAgLmNvbnRyb2xsZXIoXCJsYW5kbG9yZFByb2ZpbGVDb250cm9sbGVyXCIsIGxhbmRsb3JkUHJvZmlsZUNvbnRyb2xsZXIpO1xuXG5cbiAgICBmdW5jdGlvbiBsYW5kbG9yZFByb2ZpbGVDb250cm9sbGVyKCRzY29wZSkge1xuXG4gICAgfVxufSkoKTtcbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdGVuYW50UHJvZmlsZUNvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiXTtcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcC5wcm9maWxlc1wiKVxuXG4gICAgICAgIC5jb250cm9sbGVyKFwidGVuYW50UHJvZmlsZUNvbnRyb2xsZXJcIiwgdGVuYW50UHJvZmlsZUNvbnRyb2xsZXIpO1xuXG5cbiAgICBmdW5jdGlvbiB0ZW5hbnRQcm9maWxlQ29udHJvbGxlcigkc2NvcGUpIHtcblxuICAgIH1cbn0pKCk7XG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHNpZGVtZW51Q29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCJdO1xuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwLnNpZGVtZW51XCIpXG5cbiAgICAgICAgLmNvbnRyb2xsZXIoXCJzaWRlbWVudUNvbnRyb2xsZXJcIiwgc2lkZW1lbnVDb250cm9sbGVyKTtcblxuXG4gICAgZnVuY3Rpb24gc2lkZW1lbnVDb250cm9sbGVyKCRzY29wZSkge1xuXG4gICAgfVxufSkoKTtcbihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcsIFtcbiAgICAgICAgICAgICdpb25pYycsXG5cbiAgICAgICAgICAgICdhcHAuYXV0aCcsXG4gICAgICAgICAgICAnYXBwLnNpZGVtZW51JyxcbiAgICAgICAgICAgICdhcHAuYnVpbGRpbmdzJyxcbiAgICAgICAgICAgICdhcHAucHJvZmlsZXMnXG4gICAgICAgIF0pXG5cbiAgICAgICAgLnJ1bihbXCIkaW9uaWNQbGF0Zm9ybVwiLCBmdW5jdGlvbiAoJGlvbmljUGxhdGZvcm0pIHtcbiAgICAgICAgICAgICRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmNvcmRvdmEgJiYgd2luZG93LmNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCkge1xuICAgICAgICAgICAgICAgICAgICBjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuaGlkZUtleWJvYXJkQWNjZXNzb3J5QmFyKHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvcmRvdmEucGx1Z2lucy5LZXlib2FyZC5kaXNhYmxlU2Nyb2xsKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAod2luZG93LlN0YXR1c0Jhcikge1xuICAgICAgICAgICAgICAgICAgICBTdGF0dXNCYXIuc3R5bGVEZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1dKTtcbn0pKCk7XG5cblxuXG4oZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcblxuICAgICAgICAubW9kdWxlKCdhcHAnKVxuXG4gICAgICAgIC5jb25maWcoW1wiJHN0YXRlUHJvdmlkZXJcIiwgXCIkdXJsUm91dGVyUHJvdmlkZXJcIiwgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAgICAgICAgICAgJHN0YXRlUHJvdmlkZXJcblxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYXBwJywge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBwJyxcbiAgICAgICAgICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3Mvc2lkZW1lbnUuaHRtbCcsXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYXBwLmJ1aWxkaW5ncycsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2J1aWxkaW5ncycsXG4gICAgICAgICAgICAgICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWVudUNvbnRlbnQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9idWlsZGluZ3MuaHRtbCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2FwcC5idWlsZGluZycsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2J1aWxkaW5ncy86YnVpbGRpbmdJZCcsXG4gICAgICAgICAgICAgICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWVudUNvbnRlbnQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9idWlsZGluZy5odG1sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYXBwLnByb2ZpbGUnLCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9wcm9maWxlJyxcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogW1wiYXV0aFNlcnZpY2VcIiwgZnVuY3Rpb24gKGF1dGhTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhTZXJ2aWNlLnVzZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdtZW51Q29udGVudCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVByb3ZpZGVyOiBbXCIkdGltZW91dFwiLCBcIiRzdGF0ZVBhcmFtc1wiLCBcInVzZXJcIiwgZnVuY3Rpb24gKCR0aW1lb3V0LCAkc3RhdGVQYXJhbXMsIHVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWV3ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodXNlci50eXBlID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcgPSAndmlld3MvcHJvZmlsZS9sYW5kbG9yZC5odG1sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldyA9ICd2aWV3cy9wcm9maWxlL3RlbmFudC5odG1sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codmlldyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZpZXc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL2xvZ2luXCIsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2F1dGgvbG9naW4uaHRtbFwiXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vZmFsbGJhY2tcbiAgICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9sb2dpbicpO1xuXG4gICAgICAgIH1dKTtcbn0pKCk7XG5cblxuXG5cblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcblx0XHQuZmFjdG9yeSgnRmlyZWJhc2VTZXJ2aWNlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY29uZmlnID0ge1xuXHRcdFx0XHRhcGlLZXk6IFwiQUl6YVN5QjVxODFBR0dveDRpOC1RTDJLT3RuRERmaTA1aXJnY0hFXCIsXG5cdFx0XHRcdGF1dGhEb21haW46IFwic29jaWFsc3RyYXRhaWRlYXRlYW0uZmlyZWJhc2VhcHAuY29tXCIsXG5cdFx0XHRcdGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vc29jaWFsc3RyYXRhaWRlYXRlYW0uZmlyZWJhc2Vpby5jb21cIixcblx0XHRcdFx0c3RvcmFnZUJ1Y2tldDogXCJcIixcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChjb25maWcpO1xuXHRcdH0pO1xuXG59KSgpO1xuXG5cblxuXG4iLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwLmF1dGhcIilcblxuICAgICAgICAuc2VydmljZShcImF1dGhTZXJ2aWNlXCIsIGF1dGhTZXJ2aWNlKVxuXG5cbiAgICBmdW5jdGlvbiBhdXRoU2VydmljZSgkcSkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsb2dpbjogZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJuYW1lID09ICd1c2VyJyAmJiBwYXNzd29yZCA9PSAncGFzc3dvcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJ1dlbGNvbWUgJyArIHVzZXJuYW1lICsgJyEnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ1dyb25nIGNyZWRlbnRpYWxzIScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9taXNlLnN1Y2Nlc3MgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKGZuKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb21pc2UuZXJyb3IgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKG51bGwsIGZuKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgdXNlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiBcInVzZXJcIixcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IFwicGFzc3dvcmRcIixcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMikgKyAxXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAuYnVpbGRpbmdzXCIpXG5cbiAgICAgICAgLmNvbnRyb2xsZXIoXCJidWlsZGluZ0NvbnRyb2xsZXJcIiwgYnVpbGRpbmdDb250cm9sbGVyKTtcblxuXG4gICAgZnVuY3Rpb24gYnVpbGRpbmdDb250cm9sbGVyKCRzY29wZSwgJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgICRzY29wZS5jaGFubmVscyA9IFtcbiAgICAgICAgICAgIHsgbmFtZTogJ0NoYW5uZWwgMScsIGlkOiAxIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdDaGFubmVsIDInLCBpZDogMiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnQ2hhbm5lbCAzJywgaWQ6IDMgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ0NoYW5uZWwgNCcsIGlkOiA0IH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdDaGFubmVsIDUnLCBpZDogNSB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnQ2hhbm5lbCA2JywgaWQ6IDYgfVxuICAgICAgICBdO1xuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcC5idWlsZGluZ3NcIilcblxuICAgICAgICAuY29udHJvbGxlcihcImJ1aWxkaW5nc0NvbnRyb2xsZXJcIiwgYnVpbGRpbmdzQ29udHJvbGxlcik7XG5cblxuICAgIGZ1bmN0aW9uIGJ1aWxkaW5nc0NvbnRyb2xsZXIoJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS5idWlsZGluZ3MgPSBbXG4gICAgICAgICAgICB7IG5hbWU6ICdCdWlsZGluZyAxJywgaWQ6IDEgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ0J1aWxkaW5nIDInLCBpZDogMiB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnQnVpbGRpbmcgMycsIGlkOiAzIH0sXG4gICAgICAgICAgICB7IG5hbWU6ICdCdWlsZGluZyA0JywgaWQ6IDQgfSxcbiAgICAgICAgICAgIHsgbmFtZTogJ0J1aWxkaW5nIDUnLCBpZDogNSB9LFxuICAgICAgICAgICAgeyBuYW1lOiAnQnVpbGRpbmcgNicsIGlkOiA2IH1cbiAgICAgICAgXTtcbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAucHJvZmlsZXNcIilcblxuICAgICAgICAuY29udHJvbGxlcihcImxhbmRsb3JkUHJvZmlsZUNvbnRyb2xsZXJcIiwgbGFuZGxvcmRQcm9maWxlQ29udHJvbGxlcik7XG5cblxuICAgIGZ1bmN0aW9uIGxhbmRsb3JkUHJvZmlsZUNvbnRyb2xsZXIoJHNjb3BlKSB7XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAucHJvZmlsZXNcIilcblxuICAgICAgICAuY29udHJvbGxlcihcInRlbmFudFByb2ZpbGVDb250cm9sbGVyXCIsIHRlbmFudFByb2ZpbGVDb250cm9sbGVyKTtcblxuXG4gICAgZnVuY3Rpb24gdGVuYW50UHJvZmlsZUNvbnRyb2xsZXIoJHNjb3BlKSB7XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHAuc2lkZW1lbnVcIilcblxuICAgICAgICAuY29udHJvbGxlcihcInNpZGVtZW51Q29udHJvbGxlclwiLCBzaWRlbWVudUNvbnRyb2xsZXIpO1xuXG5cbiAgICBmdW5jdGlvbiBzaWRlbWVudUNvbnRyb2xsZXIoJHNjb3BlKSB7XG5cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhclxuXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcsIFtcbiAgICAgICAgICAgICdpb25pYycsXG5cbiAgICAgICAgICAgICdhcHAuYXV0aCcsXG4gICAgICAgICAgICAnYXBwLnNpZGVtZW51JyxcbiAgICAgICAgICAgICdhcHAuYnVpbGRpbmdzJyxcbiAgICAgICAgICAgICdhcHAucHJvZmlsZXMnXG4gICAgICAgIF0pXG5cbiAgICAgICAgLnJ1bihmdW5jdGlvbiAoJGlvbmljUGxhdGZvcm0pIHtcbiAgICAgICAgICAgICRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmNvcmRvdmEgJiYgd2luZG93LmNvcmRvdmEucGx1Z2lucy5LZXlib2FyZCkge1xuICAgICAgICAgICAgICAgICAgICBjb3Jkb3ZhLnBsdWdpbnMuS2V5Ym9hcmQuaGlkZUtleWJvYXJkQWNjZXNzb3J5QmFyKHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvcmRvdmEucGx1Z2lucy5LZXlib2FyZC5kaXNhYmxlU2Nyb2xsKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAod2luZG93LlN0YXR1c0Jhcikge1xuICAgICAgICAgICAgICAgICAgICBTdGF0dXNCYXIuc3R5bGVEZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xufSkoKTtcblxuXG4iLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcblxuICAgICAgICAubW9kdWxlKCdhcHAnKVxuXG4gICAgICAgIC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAgICAgICAgICAgJHN0YXRlUHJvdmlkZXJcblxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYXBwJywge1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBwJyxcbiAgICAgICAgICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3Mvc2lkZW1lbnUuaHRtbCcsXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYXBwLmJ1aWxkaW5ncycsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2J1aWxkaW5ncycsXG4gICAgICAgICAgICAgICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWVudUNvbnRlbnQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9idWlsZGluZ3MuaHRtbCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2FwcC5idWlsZGluZycsIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2J1aWxkaW5ncy86YnVpbGRpbmdJZCcsXG4gICAgICAgICAgICAgICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnbWVudUNvbnRlbnQnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9idWlsZGluZy5odG1sJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgIC5zdGF0ZSgnYXBwLnByb2ZpbGUnLCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9wcm9maWxlJyxcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcjogZnVuY3Rpb24gKGF1dGhTZXJ2aWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhTZXJ2aWNlLnVzZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ21lbnVDb250ZW50Jzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlUHJvdmlkZXI6IGZ1bmN0aW9uICgkdGltZW91dCwgJHN0YXRlUGFyYW1zLCB1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmlldyA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVzZXIudHlwZSA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3ID0gJ3ZpZXdzL3Byb2ZpbGUvbGFuZGxvcmQuaHRtbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcgPSAndmlld3MvcHJvZmlsZS90ZW5hbnQuaHRtbCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHZpZXcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2aWV3O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2xvZ2luJywge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IFwiL2xvZ2luXCIsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2F1dGgvbG9naW4uaHRtbFwiXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vZmFsbGJhY2tcbiAgICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9sb2dpbicpO1xuXG4gICAgICAgIH0pO1xufSkoKTtcblxuXG5cblxuIiwiKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcblx0XHQuZmFjdG9yeSgnRmlyZWJhc2VTZXJ2aWNlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgY29uZmlnID0ge1xuXHRcdFx0XHRhcGlLZXk6IFwiQUl6YVN5QjVxODFBR0dveDRpOC1RTDJLT3RuRERmaTA1aXJnY0hFXCIsXG5cdFx0XHRcdGF1dGhEb21haW46IFwic29jaWFsc3RyYXRhaWRlYXRlYW0uZmlyZWJhc2VhcHAuY29tXCIsXG5cdFx0XHRcdGRhdGFiYXNlVVJMOiBcImh0dHBzOi8vc29jaWFsc3RyYXRhaWRlYXRlYW0uZmlyZWJhc2Vpby5jb21cIixcblx0XHRcdFx0c3RvcmFnZUJ1Y2tldDogXCJcIixcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChjb25maWcpO1xuXHRcdH0pO1xuXG59KSgpO1xuXG5cblxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
